<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Programming Notes 程式筆記</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Programming Notes 程式筆記">
<meta name="author" content="">
<link rel="canonical" href="https://examplesite.com/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css" integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO&#43;tN6uT1w=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://examplesite.com/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://examplesite.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://examplesite.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://examplesite.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://examplesite.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://examplesite.com/posts/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://examplesite.com/posts/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://examplesite.com/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://examplesite.com/" accesskey="h" title="Programming Notes 程式筆記 (Alt + H)">Programming Notes 程式筆記</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用 Composite &amp; Decorator Pattern 實作資料的讀取和緩存
    </h2>
  </header>
  <div class="entry-content">
    <p>摘要： 本篇筆記介紹如何使用 Decorator Pattern 和 Composite Pattern 來重構 ViewController 中複雜的條件敘述。筆記一開始粗略地描述了用程序式寫法 (Procedure code) 實現需求的問題，接著說明使用物件導向的設計原則和前設計模式可以得到一個更好的解決更好的設計解決方案。文末介紹了如何使用流式接口(Fluent Interface)，提高Composite Pattern結構的可讀性。
狀況： 在 app 開發的場景中，可能會遇到 PM 開出類似以下的需求：
app 可以連接網路，抓取 server 端最新的資料，顯示給 user。 app 可以將最新抓取的資料，保存到本地端。 app 可以檢查本地端保存的資料是否在期限內。 app 若本地端的資料在期限內，app 會優先顯示本地端的資料。 app 若本地端的資料過期，app 會抓取 server 端最新的資料。 app 若本地端的資料過期，抓取 server 端資料也失敗，會顯示目前的本地端資料。 app 中有預設的資料，若 app 首次啟動，且無網路，無本地端的資料時，app 會顯示此份資料。 定義問題： 為了完成需求，我們可能會憑直覺地在用條件敘述 (if...else) 在 ViewController 中寫下類似以下的 code： class ViewController { ... ... ... func loadData() { if networkingManager.hasConnectiviy { AF.request(&#34;https://data-url.com&#34;).responseData { [weak self] response in ....</p>
  </div>
  <footer class="entry-footer"><span title='2022-02-08 11:58:39 +0800 CST'>February 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 使用 Composite &amp; Decorator Pattern 實作資料的讀取和緩存" href="https://examplesite.com/posts/composite-decorator-fluent-interface/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用 Decorator Pattern 管理橫切關注點 (cross-cutting-concern) 的程式碼 - 以 threading 為例。
    </h2>
  </header>
  <div class="entry-content">
    <p>摘要： 本篇筆記介紹應用 Decorator Pattern 來處理 threading 的相關問題。筆記一開始說明了散落在 UI 層或 Service 層的 threading code 造成的問題，接著用示範了如何使用 Decorator Pattern 來管理 threading 相關的 code。文末最後還簡介了 Decorator 可能的其他應用場景，例如 logging (日誌) 和 authentication (認證) 等 cross-cutting concern (橫切關注點) 的相關問題。
狀況： 作為一個 iOS dev. ，和 threading 打交道是我們常會遇到的問題。我們習慣將 App 至少分兩層 - UI Layer 和 Model Layer (還可以再細分，為了簡化，筆記中把整個 non-ui 的部分稱之為 Model Layer, 並將 Model Layer 中讀取資料的物件稱為 Service Object)。因為 UIKit 限制我們在 main thread or main queue 去使用 UIKit 大部分的 class [1], 我們可能會寫下這樣的 code:...</p>
  </div>
  <footer class="entry-footer"><span title='2022-02-08 11:58:39 +0800 CST'>February 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 使用 Decorator Pattern 管理橫切關注點 (cross-cutting-concern) 的程式碼 - 以 threading 為例。" href="https://examplesite.com/posts/decorator-cross-cutting-concern/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用 MVP UI Design Pattern 將基於 UIKit 的 Toy project 重構到 SwiftUI
    </h2>
  </header>
  <div class="entry-content">
    <p>摘要： 本篇筆記實驗如何使用 MVP Pattern 將基於 UIKit 和 MVC Pattern 的 legacy code 遷移到 iOS 平台新的 UI framweork - SwiftUI. 筆記一開始點出了使用 MVC 實作一個 toy project 帶來的問題，與 migrate 到 swiftUI 的動機，接著介紹了 MVVM, MVP Pattern 在 Clean Architecture 的分層結構中所處的位置，與加入 Presentation Layer 所帶來的好處，並為使用 MVP 或 MVVM pattern 進行 SwiftUI 的 migration 做了一個簡單的比較。筆記最後展示了使用 MVP 對一個 toy project 進行 migration 的結果。
狀況： Apple 在 2019 年的 WWDC 推出了新的 UI framework - SwiftUI。隨著 iOS 15 的問世，SwiftUI 也越來越成熟。SwiftUI 提供宣告式 (declarative) 的 api, 讓開法者可以更有效率的進行 UI 開發，是時候開始將老舊的 codebase migrate 到 swiftUI 了。...</p>
  </div>
  <footer class="entry-footer"><span title='2022-02-08 11:58:39 +0800 CST'>February 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 使用 MVP UI Design Pattern 將基於 UIKit 的 Toy project 重構到 SwiftUI" href="https://examplesite.com/posts/mvvm-mvp-refactor-to-swift-ui/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用 Polymorphism 簡化 TableView DataSource 中的條件敘述
    </h2>
  </header>
  <div class="entry-content">
    <p>摘要： 本篇筆記介紹了 Replace Conditional with Polymorphism (以多型代替條件) 的重構技巧，並運用此技巧，將 UITableViewDataSource 中的 switch statement 移除掉，得到一個較為乾淨的 code.
狀況： 我們常在 code base 中看到如下的 tableView data source:
enum Section: Int { case input = 0, todos, max } override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int { guard let section = Section(rawValue: section) else { fatalError() } switch section { case .input: return 1 case .todos: return todos.count case .max: fatalError() } } override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell { guard let section = Section(rawValue: indexPath....</p>
  </div>
  <footer class="entry-footer"><span title='2022-02-08 11:58:39 +0800 CST'>February 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 使用 Polymorphism 簡化 TableView DataSource 中的條件敘述" href="https://examplesite.com/posts/remove-conditional-data-source-using-polymorphism/"></a>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://examplesite.com/">Programming Notes 程式筆記</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
